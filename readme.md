# Pyxel Tracker

Pyxel Tracker はレトロゲームエンジン「Pyxel」用のミュージックエディタです。
作成した音楽データは.pyxapp 形式ではなく、json ファイルとして musics フォルダに出力します。

また、midi ファイルとしてエクスポートすることもできます。

バグ、要望などありましたら、 Twitter
[frenchbread](https://twitter.com/frenchbread1222) (@frenchbread1222) まで DM 等でお知らせください。

（自分が使うために作成したアプリなので、操作性などにややクセがあります。）

## 起動方法

以下のコマンドで起動してください。

※2025/7/18 Pyxel2.4でサウンド関係の仕様が変更されたため2.4以上のバージョンに対応しました。2.3以下では正常に動作しないためご注意ください。

```
pyxel run editor
```

midi ファイルエクスポート機能を使いたい方は、事前に mido ライブラリをインストールしてください。

```
pip install mido
```

## フォルダ・ファイルの説明

- projects フォルダ： 編集用の音楽データ（json ファイル）が出力されます。
- musics フォルダ： 作成した音楽データが出力されます。json ファイルの内容は 4x5 の配列となっており、pyxel.play()関数に指定することで再生できます。詳しくは play.py を見てください。
- system フォルダ： スクリプトやデフォルトの音色・ドラムパターンファイルが格納されています。更新しないでください。
- user フォルダ： 現時点では音色ファイル(tones.json)のみを保存します（次項参照）。
- midi フォルダ： midi ファイルをエクスポートすると、このフォルダに保存されます。
- editor.py： エディタ本体のソースファイルです。
- play.py： Pyxel Tracker で出力した音楽データを再生するための最低限のソースファイルです。
- help.txt： 操作ヘルプ用のテキストです。エディタ上で esc キーを押すことで参照できます。
- readme.md： このファイルです。

## 音色ファイルとドラムパターンファイル

- エディタ上で編集した音色ファイルは、user/tones.json に保存されます。音色ファイルをデフォルトに戻したい場合、tones.json を削除してください。
- ドラムパターンファイルは、現時点でエディタからは編集できませんが、ある程度知識がある方であれば system/pattern.json を見れば構造が推測できると思います。user フォルダにコピーして編集することで、user フォルダのファイルが優先して参照されます。
- 音色ファイル・ドラムファイルともに、プロジェクト単位ではなく、全プロジェクト共通のファイルとなります。

## midi ファイルのエクスポートの制約事項

- 音色情報は引き継げません。すべて Harpichord（チェンバロ）の音色として出力されます。
- ドラムパートの出力が不完全です。具体的には複数パートでノイズドラムを鳴らすと正しく出力できません。

## チュートリアル

以下の動画を見てください。

[![Snapshot_2023-03-07-20 00 39](https://user-images.githubusercontent.com/53714664/223405666-ad2fa483-c1e3-46c5-a3d8-8571b00a1bf8.png)](https://youtu.be/II8bUHeJow8)
